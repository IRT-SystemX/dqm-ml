

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tests of Completeness, Representtiveness &mdash; DQM 1.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=fc837d61"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            DQM
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guidelines.html">üí° Guideline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../completeness.html">üçä Completeness</a></li>
<li class="toctree-l1"><a class="reference internal" href="../diversity.html">üçé Diversity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../domain_gap.html">üçã Domain gap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../representativeness.html">üçì Representativeness</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dqm.html">üé° Package dqm</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DQM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tests of Completeness, Representtiveness</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/final-tests.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Tests-of-Completeness,-Representtiveness">
<h1>Tests of Completeness, Representtiveness<a class="headerlink" href="#Tests-of-Completeness,-Representtiveness" title="Link to this heading">ÔÉÅ</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Common Libraries</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">dqm</span>
</pre></div>
</div>
</div>
<section id="Tests-on-VDP-dataset">
<h2>Tests on VDP dataset<a class="headerlink" href="#Tests-on-VDP-dataset" title="Link to this heading">ÔÉÅ</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># upload data</span>
<span class="c1"># Dataset path</span>
<span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;datasets/features.csv&quot;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="c1">#print(&quot;Data info:\n&quot;, data.info())</span>
<span class="c1"># print(&quot;The first 5 lines:\n&quot;, data.head())</span>
<span class="n">data</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>image</th>
      <th>camera</th>
      <th>sequence</th>
      <th>environment</th>
      <th>country</th>
      <th>sky_cover</th>
      <th>surface_condition</th>
      <th>timestamp</th>
      <th>lighting_level</th>
      <th>climatic_conditions</th>
      <th>...</th>
      <th>Traffic_light_unknown</th>
      <th>Traffic_light_green</th>
      <th>Bicycle</th>
      <th>Other_mobile</th>
      <th>Person_group</th>
      <th>Bus</th>
      <th>Trailer</th>
      <th>Caravan</th>
      <th>Train</th>
      <th>unknown</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>20170320_144339_cam_0_00011702.jpg</td>
      <td>FV</td>
      <td>20170320_144339</td>
      <td>Urban</td>
      <td>FR</td>
      <td>Cloudy</td>
      <td>dry</td>
      <td>0</td>
      <td>Daylight/Bright</td>
      <td>Dry</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>20170320_144339_cam_0_00011708.jpg</td>
      <td>FV</td>
      <td>20170320_144339</td>
      <td>Urban</td>
      <td>FR</td>
      <td>Cloudy</td>
      <td>dry</td>
      <td>1</td>
      <td>Daylight/Bright</td>
      <td>Dry</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>20170320_144339_cam_0_00011714.jpg</td>
      <td>FV</td>
      <td>20170320_144339</td>
      <td>Urban</td>
      <td>FR</td>
      <td>Cloudy</td>
      <td>dry</td>
      <td>2</td>
      <td>Daylight/Bright</td>
      <td>Dry</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>20170320_144339_cam_0_00011720.jpg</td>
      <td>FV</td>
      <td>20170320_144339</td>
      <td>Urban</td>
      <td>FR</td>
      <td>Cloudy</td>
      <td>dry</td>
      <td>3</td>
      <td>Daylight/Bright</td>
      <td>Dry</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>20170320_144339_cam_0_00011726.jpg</td>
      <td>FV</td>
      <td>20170320_144339</td>
      <td>Urban</td>
      <td>FR</td>
      <td>Cloudy</td>
      <td>dry</td>
      <td>4</td>
      <td>Daylight/Bright</td>
      <td>Dry</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>124015</th>
      <td>20180725_193156_cam_3_00006233.jpg</td>
      <td>MVL</td>
      <td>20180725_193156</td>
      <td>Urban</td>
      <td>US</td>
      <td>Clear</td>
      <td>dry</td>
      <td>164</td>
      <td>Daylight/Bright</td>
      <td>Dry</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>124016</th>
      <td>20180725_193156_cam_3_00006234.jpg</td>
      <td>MVL</td>
      <td>20180725_193156</td>
      <td>Urban</td>
      <td>US</td>
      <td>Clear</td>
      <td>dry</td>
      <td>165</td>
      <td>Daylight/Bright</td>
      <td>Dry</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>124017</th>
      <td>20180725_193156_cam_3_00006241.jpg</td>
      <td>MVL</td>
      <td>20180725_193156</td>
      <td>Urban</td>
      <td>US</td>
      <td>Clear</td>
      <td>dry</td>
      <td>166</td>
      <td>Daylight/Bright</td>
      <td>Dry</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>124018</th>
      <td>20180725_193156_cam_3_00006246.jpg</td>
      <td>MVL</td>
      <td>20180725_193156</td>
      <td>Urban</td>
      <td>US</td>
      <td>Clear</td>
      <td>dry</td>
      <td>167</td>
      <td>Daylight/Bright</td>
      <td>Dry</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>124019</th>
      <td>20180725_193156_cam_3_00006249.jpg</td>
      <td>MVL</td>
      <td>20180725_193156</td>
      <td>Urban</td>
      <td>US</td>
      <td>Clear</td>
      <td>dry</td>
      <td>168</td>
      <td>Daylight/Bright</td>
      <td>Dry</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>124020 rows √ó 32 columns</p>
</div></div>
</div>
</section>
</section>
<section id="Completeness">
<h1>Completeness<a class="headerlink" href="#Completeness" title="Link to this heading">ÔÉÅ</a></h1>
<p>you can see also the file: <em>dqm/completeness/main.py</em></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Specific Libraries</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dqm.completeness.metric</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataCompleteness</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">completeness_evaluator</span> <span class="o">=</span> <span class="n">DataCompleteness</span><span class="p">()</span>
<span class="n">overall_score</span> <span class="o">=</span> <span class="n">completeness_evaluator</span><span class="o">.</span><span class="n">completeness_tabular</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">overall_score</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1.0
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">column_score</span> <span class="o">=</span> <span class="n">completeness_evaluator</span><span class="o">.</span><span class="n">data_completion</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Car&#39;</span><span class="p">])</span>

<span class="c1"># Print the results</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Overall Data Completeness Score: </span><span class="si">{</span><span class="n">overall_score</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Completeness Score for Column: </span><span class="si">{</span><span class="n">column_score</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Overall Data Completeness Score: 1.0
Completeness Score for Column: 1
</pre></div></div>
</div>
</section>
<section id="Representativeness">
<h1>Representativeness<a class="headerlink" href="#Representativeness" title="Link to this heading">ÔÉÅ</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Specific Libraries</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dqm.representativeness.metric</span><span class="w"> </span><span class="kn">import</span> <span class="n">DistributionAnalyzer</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[04-26 14:44:23] {/home/ubuntu/data_quality/data_quality_metrics/dqm/representativeness/twe_logger.py:102} INFO      - Logger: twe_logger, handlers: [&lt;StreamHandler stdout (DEBUG)&gt;]
[04-26 14:44:23] {/home/ubuntu/data_quality/data_quality_metrics/dqm/representativeness/twe_logger.py:102} INFO      - Logger: twe_logger, handlers: [&lt;StreamHandler stdout (DEBUG)&gt;]
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Car&quot;</span><span class="p">]</span> <span class="c1"># you can choose another variable from the data.</span>
<span class="n">mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
<span class="n">std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
<span class="c1"># data = pd.Series(np.random.normal(0, 1, 1000))</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Parameters for analysis</span>
<span class="n">bins</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">distribution</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span>

<span class="c1"># Instantiation of DistributionAnalyzer</span>
<span class="n">analyzer</span> <span class="o">=</span> <span class="n">DistributionAnalyzer</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">distribution</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[04-26 14:44:28] {/home/ubuntu/data_quality/data_quality_metrics/dqm/representativeness/twe_logger.py:102} INFO      - Logger: twe_logger, handlers: [&lt;StreamHandler stdout (DEBUG)&gt;]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Using the method chisquare_test</span>
<span class="n">pvalue</span><span class="p">,</span> <span class="n">intervals_frequencies</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">chisquare_test</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Chi-Square Test: p-value = </span><span class="si">{</span><span class="n">pvalue</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Chi-Square Test: discretized intervalls are </span><span class="se">\n</span><span class="s2"> = </span><span class="si">{</span><span class="n">intervals_frequencies</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[04-26 14:48:39] {/home/ubuntu/data_quality/data_quality_metrics/dqm/representativeness/metric.py:170} INFO      - pvalue = 0.0 &lt; 0.05: Data is not following the normal distribution
Chi-Square Test: p-value = 0.0
Chi-Square Test: discretized intervalls are
 =     lower_limit  upper_limit  obs_freq  exp_freq
0          -inf    -0.468070       0.0    6096.0
1     -0.468070     1.208538    9419.0    6221.0
2      1.208538     2.339737    9369.0    6100.0
3      2.339737     3.238778   10283.0    6182.0
4      3.238778     4.010075   11344.0    6257.0
5      4.010075     4.702724       0.0    6216.0
6      4.702724     5.344566   11310.0    6119.0
7      5.344566     5.953612       0.0    6163.0
8      5.953612     6.542870   11410.0    6253.0
9      6.542870     7.122787   10550.0    6208.0
10     7.122787     7.702703       0.0    6265.0
11     7.702703     8.291961    9498.0    6257.0
12     8.291961     8.901007       0.0    6233.0
13     8.901007     9.542849    7939.0    6205.0
14     9.542849    10.235498    7101.0    6074.0
15    10.235498    11.006795    5919.0    6261.0
16    11.006795    11.905837       0.0    6377.0
17    11.905837    13.037036    8326.0    6255.0
18    13.037036    14.713643    2965.0    6087.0
19    14.713643          inf    8587.0    6191.0
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Using the method kolmogorov</span>
<span class="n">ks_pvalue</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">kolmogorov</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Kolmogorov-Smirnov Test: p-value = </span><span class="si">{</span><span class="n">ks_pvalue</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[04-26 14:51:18] {/home/ubuntu/data_quality/data_quality_metrics/dqm/representativeness/metric.py:201} ERROR      - Error: Provide mean and std for normal distribution.
Kolmogorov-Smirnov Test: p-value = nan
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Using the method shannon_entropy</span>
<span class="n">entropy</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">shannon_entropy</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Shannon Entropy: </span><span class="si">{</span><span class="n">entropy</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Shannon Entropy: 2.99564085105308
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Using the method grte</span>
<span class="n">grte_result</span><span class="p">,</span> <span class="n">intervals_discretized</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">grte</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;GRTE: </span><span class="si">{</span><span class="n">grte_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1">#print(f&quot;GRTE discretized intervalls are \n = {intervals_discretized}&quot;) # uncomment to display data discretization</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
GRTE: 0.4539808413284466
</pre></div></div>
</div>
</section>
<section id="Diversity-test">
<h1>Diversity test<a class="headerlink" href="#Diversity-test" title="Link to this heading">ÔÉÅ</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># specifion Libraries</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dqm.diversity.metric</span><span class="w"> </span><span class="kn">import</span> <span class="n">DiversityIndexCalculator</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">metric_calculator</span> <span class="o">=</span> <span class="n">DiversityIndexCalculator</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Simpson index</span>
<span class="n">metric_calculator</span><span class="o">.</span><span class="n">simpson</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Car&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.9323387738944272
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Gini-Simpson Index</span>
<span class="n">metric_calculator</span><span class="o">.</span><span class="n">gini</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Car&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.9323312562458713
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">dqm.diversity.diversity</span><span class="w"> </span><span class="kn">import</span> <span class="n">DiversityCalculator</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dqm.diversity.metric</span><span class="w"> </span><span class="kn">import</span> <span class="n">DiversityIndexCalculator</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dqm.diversity.twe_logger</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_logger</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="k">class</span><span class="w"> </span><span class="nc">DataDiversityAnalyzer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class for analyzing the diversity of datasets.</span>

<span class="sd">    This class integrates with DiversityCalculator and DiversityIndexCalculator</span>
<span class="sd">    to compute and analyze various diversity indices within a dataset. It provides</span>
<span class="sd">    methods to calculate and report diversity scores for specific features, aiding</span>
<span class="sd">    in understanding the distribution and representation in datasets.</span>

<span class="sd">    Methods:</span>
<span class="sd">        calculate_diversity_scores(data, feature): Calculates and logs the</span>
<span class="sd">            diversity scores for a given feature.</span>
<span class="sd">        none_function(): A placeholder method that currently does nothing.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the DataDiversityAnalyzer with necessary components.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            metric_calculator (DiversityIndexCalculator): Calculator for diversity indices.</span>
<span class="sd">            calculator (DiversityCalculator): Calculator for general diversity metrics.</span>
<span class="sd">            logger (Logger): Logger for logging information during the analysis.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric_calculator</span> <span class="o">=</span> <span class="n">DiversityIndexCalculator</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calculator</span> <span class="o">=</span> <span class="n">DiversityCalculator</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_diversity_scores</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">feature</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate diversity scores for a given feature in the dataset.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (pandas.DataFrame): The dataset containing the feature.</span>
<span class="sd">            feature (str): The feature for which diversity scores are calculated.</span>

<span class="sd">        Returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#self.logger.info(&quot;The first 5 lines of the data:&quot;)</span>
        <span class="c1">#self.logger.info(data.head())</span>
        <span class="c1">#self.logger.info(&quot;Data shape:&quot;)</span>
        <span class="c1">#self.logger.info(data.shape)</span>
        <span class="c1">#self.logger.info(&quot;Columns:&quot;)</span>
        <span class="c1">#self.logger.info(data.columns)</span>
        <span class="c1">#self.logger.info(&quot;Columns types:&quot;)</span>
        <span class="c1">#self.logger.info(data.dtypes)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric_calculator</span><span class="o">.</span><span class="n">simpson</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">feature</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Simpson index: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metric_calculator</span><span class="o">.</span><span class="n">gini</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">feature</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Gini index: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">g</span><span class="p">)</span>

        <span class="n">diversity_score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculator</span><span class="o">.</span><span class="n">compute_diversity</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">feature</span><span class="p">],</span> <span class="s1">&#39;lexical&#39;</span><span class="p">,</span> <span class="s1">&#39;richness&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Diversity score: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">diversity_score</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">none_function</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A placeholder function that currently performs no operation.</span>

<span class="sd">        Returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Do not something&quot;</span><span class="p">)</span>
<br/><br/><br/><br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[04-18 09:26:50] {/home/ubuntu/data_quality/data_quality_metrics/dqm/diversity/twe_logger.py:104} INFO      - Logger: twe_logger, handlers: [&lt;StreamHandler stdout (DEBUG)&gt;]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use of DataDiversityAnalyzer Class</span>
<span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;data/vdp_image_train_and_test_v2.csv&quot;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="n">analyzer</span> <span class="o">=</span> <span class="n">DataDiversityAnalyzer</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;data/vdp_image_train_and_test_v2.csv&quot;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;;&quot;</span><span class="p">)</span>
<span class="c1">#feature_name = &quot;Traffic_light_green&quot;</span>
<span class="c1">#analyzer.calculate_diversity_scores(df, feature_name)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="s1">&#39;bool&#39;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;For </span><span class="si">{</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="si">}</span><span class="s2"> feature :&quot;</span><span class="p">)</span>
        <span class="n">analyzer</span><span class="o">.</span><span class="n">calculate_diversity_scores</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;---------------------------------------------------------&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[04-18 09:28:35] {/home/ubuntu/data_quality/data_quality_metrics/dqm/diversity/twe_logger.py:104} INFO      - Logger: twe_logger, handlers: [&lt;StreamHandler stdout (DEBUG)&gt;]
For timestamp feature :
[04-18 09:28:35] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.9970976766869423
[04-18 09:28:35] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.9970896368733906
[04-18 09:28:35] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 6.080977198285112
---------------------------------------------------------
For Car feature :
[04-18 09:28:35] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.9323387738944272
[04-18 09:28:35] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.9323312562458713
[04-18 09:28:35] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 2.8433151505861547
---------------------------------------------------------
For Van feature :
[04-18 09:28:35] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.651716419208147
[04-18 09:28:35] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.6517111642781421
[04-18 09:28:35] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 1.2941409814642448
---------------------------------------------------------
For Truck feature :
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.5388641326928932
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.5388597877152066
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 1.0880443116538665
---------------------------------------------------------
For Other_occluding feature :
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.24320731718231825
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.24320535614928207
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 0.6376700853388106
---------------------------------------------------------
For Traffic_sign feature :
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.7561284566502878
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.7561223598235127
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 1.8551825446588075
---------------------------------------------------------
For Motorcycle feature :
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.46722121765396485
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.467217450348549
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 1.0132821017330949
---------------------------------------------------------
For Person feature :
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.8512408124323341
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.8512339486941272
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 2.4627454954401102
---------------------------------------------------------
For Vehicle_group feature :
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.5528581858563403
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.5528537280415858
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 1.10829531689193
---------------------------------------------------------
For Traffic_light_yellow feature :
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.022071459679619876
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.022071281712681468
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 0.0690185981780445
---------------------------------------------------------
For Traffic_light_red feature :
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.18349282147425072
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.18349134193206806
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 0.40522304793064917
---------------------------------------------------------
For Traffic_light_unknown feature :
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.11476441868241238
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.11476349331216007
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 0.27669248376265476
---------------------------------------------------------
For Traffic_light_green feature :
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.22431870847325142
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.22431689974313962
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 0.4847130632946491
---------------------------------------------------------
For Bicycle feature :
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.3887342728497317
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.38873113840147466
[04-18 09:28:36] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 0.8483535810638099
---------------------------------------------------------
For Other_mobile feature :
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.15520541295817358
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.15520416150346483
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 0.40123511976113146
---------------------------------------------------------
For Person_group feature :
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.20676991676053447
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.20676824953011386
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 0.48632058103972675
---------------------------------------------------------
For Bus feature :
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.41583207960762403
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.41582872666390847
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 0.8348802619173306
---------------------------------------------------------
For Trailer feature :
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.045067094329235724
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.04506673094353708
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 0.11469135556815079
---------------------------------------------------------
For Caravan feature :
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.04352518052077481
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.04352482956785986
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 0.11729187228393431
---------------------------------------------------------
For Train feature :
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 0.04988835425086291
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 0.049887951990306156
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 0.1325605322798743
---------------------------------------------------------
For unknown feature :
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:56} INFO      - Simpson index: 1.6126431220730986e-05
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:59} INFO      - Gini index: 1.612630118996705e-05
[04-18 09:28:37] {/tmp/ipykernel_396843/3773604603.py:62} INFO      - Diversity score: 0.0001026301732808389
---------------------------------------------------------
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># relative diversity :</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">index</span>
<span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span> <span class="ow">in</span> <span class="n">b</span><span class="p">)</span>
<span class="n">c</span>
<span class="n">index_in</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">requirement_camera</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;RV&quot;</span><span class="p">,</span> <span class="s2">&quot;MVR&quot;</span><span class="p">,</span> <span class="s2">&quot;FV&quot;</span><span class="p">,</span> <span class="s2">&quot;adf&quot;</span><span class="p">,</span> <span class="s2">&quot;dfg&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="k">def</span><span class="w"> </span><span class="nf">relative_diversity</span> <span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="n">requirements</span><span class="p">):</span>
    <span class="n">index_in</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">requirements</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">variable</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">index_in</span> <span class="o">+=</span><span class="mi">1</span>

    <span class="n">Relative_diversity_score</span> <span class="o">=</span> <span class="n">index_in</span> <span class="o">/</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">requirement_camera</span><span class="p">)</span><span class="o">-</span><span class="n">index_in</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Relative_diversity_score</span>
<span class="c1">#Relative_diversity</span>

<span class="n">relative_diversity</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Car</span><span class="p">,</span> <span class="n">requirement_camera</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
5
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.1111111111111111
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span> <span class="n">df</span><span class="o">.</span><span class="n">Car</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Index([ 6,  4,  5,  7,  3,  8,  2,  9, 10,  1, 11, 12, 13, 14,  0, 15, 16, 17,
       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 32, 31, 34, 33, 35,
       38, 37, 36, 41, 39],
      dtype=&#39;int64&#39;, name=&#39;Car&#39;)
</pre></div></div>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, IRT SystemX.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>